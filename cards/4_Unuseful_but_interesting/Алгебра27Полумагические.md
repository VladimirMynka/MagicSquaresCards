# Полумагический квадрат в старом базисе
### Info type
4_Unuseful_but_interesting
### Keywords
~Алгебра27Полумагические, ~магические квадраты, ~полумагический квадрат, ~алгебра
### Text
Воспользуемся этим и отметим, что $a_0$ — полумагическая константа. Её легко найти, просто сложив все элементы в одной строке/столбце. $a_3$ — это разность верхнего левого угла и правого нижнего, умноженная на $\frac{\sqrt{3}}{2}$. Аналогично, $a_4$ выражается из двух других углов. Искать оставшиеся два параметра придётся по двум уравнениям. Удобнее всего рассматривать центральный элемент и угловой. Однако в целых числах, определённо, удобнее работать со старыми базисами, чтобы избежать иррациональности и дробей. В старых базисах:
$$c(E, z, w) + m(0, x, y) = m(E, x, y) + c(0, z, w)$$
$$
\begin{matrix}
E+x+2z-w & E-x+y-z-w & E-y-z+2w \\
E-x-y-z-w & E+2z+2w & E+x+y-z-w \\
E+y-z+2w & E-x+2z-w & E-x+2z-w
\end{matrix}
$$
Здесь E - магическая константа, делённая на 3, x - разность соответствующих углов, делённая на 2, y - аналогично, — это сумма главной диагонали, делённая на три, без двух E, и таким же образом получается из побочной диагонали.
```
