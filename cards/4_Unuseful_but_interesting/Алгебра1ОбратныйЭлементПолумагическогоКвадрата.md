# Алгебра1ОбратныйЭлементПолумагическогоКвадрата
### Info type
4_Unuseful_but_interesting
### Keywords
#Алгебра1ОбратныйЭлементПолумагическогоКвадрата, #обратный элемент, #полумагический квадрат
### Text
Обратный элемент к полумагическому квадрату существует при ненулевом определителе и может быть записан как
```
sm(E, x, y, v, w)⁻¹ = sm(
  (3v² - 3w² + x² - y²) / 9E,
  -x / 3,
  -y / 3,
   v / 3,
  -w / 3,
) / (3v² - 3w² + x² - y²)
```

Таким образом, все сингулярные полумагические квадраты удовлетворяют уравнению
$-9E \cdot (3v² - 3w² + x² - y²) <=> $

```
|      E = 0
| ИЛИ  3(v² - w²) = y² - x²
```

Второе условие, в случае магических и чарующих квадратов, означает, что абсолютные значения при коэффициентах второго и третьего компонент (m₁ и m₂, m₃ и m₄ соответственно), равны тогда и только тогда, когда квадрат не имеет обратного.

При этом матричная единица сама относится к чарующим квадратам и записывается в них как $c(1/3, 1/3, 0)$.